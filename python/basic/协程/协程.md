### 协程的概念

协程，又称为微线程，英文名Coroutine。协程的作用是：在执行函数A时，可以随时中断，去执行函数B，然后中断继续执行函数A（可以自由切换）。但这一过程并不是函数调用（没有调用语句）。这一整个过程看似像多线程，但实际上只有一个线程执行。

### 协程的优势

* 执行效率高，因为程序切换不是线程切换。由程序自身控制，没有切换线程的开销。所以与多线程相比，线程的数量越多，协程的性能优势越明显。
* 不需要多线程的锁机制，因为只有一个线程，也不存在同时写变量冲突。在控制共享资源时也不需要加锁。因此执0行效率可以高很多。
* 无需线程上下文切换的开销。
* 无需原子操作和锁定及同步的开销。（原子操作是指不会被线程调度机制打断的操作，这种操作一旦开始，就一直运行到结束）
* 方便切换控制流，简化编程模型。
* 高并发、高扩展性、低成本：一个cpu支持上万多协程都行，适合于进行高并发处理。

PS：协程可以处理IO密集型程序的效率问题，但是处理CPU密集型任务不是它的长处，如果充分发挥CPU的性能可以结合多进程和协程。

### 协程的缺点

* 无法利用多核资源
  * 协程的本质是单个线程，它不能同时将单个cpu的多个核用上。
  * 协程需要和进程配合才能运行在多个cpu上。
* 进行阻塞（Blocking）操作（如IO）时会阻塞掉整个程序。